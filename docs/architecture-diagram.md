### High-Level System Diagram

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           CLIENT APPLICATIONS                                │
│                                                                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │   Web App    │  │   Mobile     │  │   Trading    │  │   Analytics  │   │
│  │   Dashboard  │  │   Client     │  │   Platform   │  │   Tools      │   │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘   │
│         │                 │                  │                  │            │
│         └─────────────────┴──────────────────┴──────────────────┘            │
│                                    │                                         │
│                          HTTP/WebSocket (Port 8000)                          │
└─────────────────────────────────────┬───────────────────────────────────────┘
                                      │
┌─────────────────────────────────────▼───────────────────────────────────────┐
│                        FASTAPI MICROSERVICE                                  │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                         API LAYER                                      │ │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                │ │
│  │  │ REST API     │  │  WebSocket   │  │   Health     │                │ │
│  │  │ Endpoints    │  │  Manager     │  │   Checks     │                │ │
│  │  │ /ticks       │  │  /ws/ticks   │  │  /health     │                │ │
│  │  │ /ohlc/*      │  │  /ws/ohlc/*  │  │  /ws/stats   │                │ │
│  │  └──────┬───────┘  └──────┬───────┘  └──────────────┘                │ │
│  └─────────┼──────────────────┼─────────────────────────────────────────┘ │
│            │                  │                                             │
│  ┌─────────▼──────────────────▼─────────────────────────────────────────┐ │
│  │                      BUSINESS LOGIC LAYER                             │ │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐               │ │
│  │  │ OHLC Service │  │ Tick Service │  │  Validation  │               │ │
│  │  │ (Aggregates) │  │  (CRUD)      │  │  (Pydantic)  │               │ │
│  │  └──────┬───────┘  └──────┬───────┘  └──────────────┘               │ │
│  └─────────┼──────────────────┼─────────────────────────────────────────┘ │
│            │                  │                                             │
│  ┌─────────▼──────────────────▼─────────────────────────────────────────┐ │
│  │                     BACKGROUND SERVICES                               │ │
│  │  ┌──────────────┐         ┌──────────────┐                           │ │
│  │  │Tick Generator│────────▶│Redis Consumer│                           │ │
│  │  │(1s interval) │  Pub/Sub│(DB Inserter) │                           │ │
│  │  └──────────────┘         └──────┬───────┘                           │ │
│  └─────────────────────────────────────┼─────────────────────────────────┘ │
└─────────────────────────────────────────┼───────────────────────────────────┘
                                          │
        ┌─────────────────────────────────┼─────────────────────────────────┐
        │                                 │                                 │
        ▼                                 ▼                                 │
┌───────────────┐              ┌─────────────────────┐                     │
│  REDIS        │              │   TIMESCALEDB       │                     │
│  (Pub/Sub)    │              │   (PostgreSQL)      │                     │
│               │              │                     │                     │
│ ┌───────────┐ │              │ ┌─────────────────┐ │                     │
│ │ Channel:  │ │              │ │  Hypertable:    │ │                     │
│ │ eurusd_   │ │              │ │  eurusd_ticks   │ │◀────────────────────┘
│ │ ticks     │ │              │ │  (time, symbol, │ │
│ └───────────┘ │              │ │   price)        │ │
│               │              │ └────────┬────────┘ │
│               │              │          │          │
│               │              │ ┌────────▼────────┐ │
│               │              │ │ Continuous      │ │
│               │              │ │ Aggregates:     │ │
│               │              │ │ • Minute (5s)   │ │
│               │              │ │ • Hour (30s)    │ │
│               │              │ │ • Day (5m)      │ │
│               │              │ └─────────────────┘ │
└───────────────┘              └─────────────────────┘

DATA FLOW:
1. Tick Generator → Redis Pub/Sub (eurusd_ticks channel)
2. Redis Consumer → Subscribes to channel → Inserts to TimescaleDB
3. TimescaleDB → Continuous Aggregates compute OHLC automatically
4. REST API → Queries TimescaleDB → Returns OHLC data
5. WebSocket → Broadcasts real-time updates to connected clients
```
